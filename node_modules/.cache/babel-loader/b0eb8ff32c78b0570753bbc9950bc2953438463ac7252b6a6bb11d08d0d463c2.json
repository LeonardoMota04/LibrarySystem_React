{"ast":null,"code":"var _jsxFileName = \"/Users/leonardomota/Desktop/testeDeSoftware/library-system-react/src/components/BookCard.jsx\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport { useAuth } from \"../contexts/AuthContext\";\nimport { addToFavorites, removeFromFavorites } from \"../services/bookService\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function BookCard({\n  book\n}) {\n  _s();\n  const {\n    user\n  } = useAuth();\n  const [isFavorite, setIsFavorite] = useState(false);\n  const [favoritesCount, setFavoritesCount] = useState(book.favoritesCount || 0);\n  const [loading, setLoading] = useState(false);\n  useEffect(() => {\n    if (user) {\n      // Verificar se o livro est치 nos favoritos do usu치rio\n      const checkFavorite = async () => {\n        try {\n          const userFavorites = await getUserFavorites(user.uid);\n          setIsFavorite(userFavorites.some(fav => fav.id === book.id));\n        } catch (error) {\n          console.error(\"Erro ao verificar favoritos:\", error);\n        }\n      };\n      checkFavorite();\n    }\n  }, [user, book.id]);\n  const handleToggleFavorite = async () => {\n    if (!user) return;\n    setLoading(true);\n    try {\n      if (isFavorite) {\n        await removeFromFavorites(user.uid, book.id);\n        setFavoritesCount(prev => Math.max(0, prev - 1));\n      } else {\n        await addToFavorites(user.uid, book);\n        setFavoritesCount(prev => prev + 1);\n      }\n      setIsFavorite(!isFavorite);\n    } catch (error) {\n      console.error(\"Erro ao atualizar favoritos:\", error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-300\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative pb-[140%]\",\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        src: book.imageUrl,\n        alt: book.title,\n        className: \"absolute top-0 left-0 w-full h-full object-cover\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-lg font-semibold text-gray-800 mb-2 line-clamp-2\",\n        children: book.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-sm text-gray-600 mb-3\",\n        children: book.author\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-sm text-gray-500 mb-4 line-clamp-3\",\n        children: book.description\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-sm text-gray-500\",\n          children: [favoritesCount, \" \", favoritesCount === 1 ? 'favorito' : 'favoritos']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleToggleFavorite,\n          disabled: loading || !user,\n          className: `flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium transition-colors ${isFavorite ? \"bg-red-100 text-red-600 hover:bg-red-200\" : \"bg-gray-100 text-gray-600 hover:bg-gray-200\"} ${(!user || loading) && \"opacity-50 cursor-not-allowed\"}`,\n          children: loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n              className: \"w-4 h-4\",\n              fill: isFavorite ? \"currentColor\" : \"none\",\n              stroke: \"currentColor\",\n              viewBox: \"0 0 24 24\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                strokeLinecap: \"round\",\n                strokeLinejoin: \"round\",\n                strokeWidth: 2,\n                d: \"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 88,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 17\n            }, this), isFavorite ? \"Favoritado\" : \"Favoritar\"]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 5\n  }, this);\n}\n_s(BookCard, \"Mng+24Z14RQO6OVC+UXJXrn4CcM=\", false, function () {\n  return [useAuth];\n});\n_c = BookCard;\nvar _c;\n$RefreshReg$(_c, \"BookCard\");","map":{"version":3,"names":["useState","useEffect","useAuth","addToFavorites","removeFromFavorites","jsxDEV","_jsxDEV","Fragment","_Fragment","BookCard","book","_s","user","isFavorite","setIsFavorite","favoritesCount","setFavoritesCount","loading","setLoading","checkFavorite","userFavorites","getUserFavorites","uid","some","fav","id","error","console","handleToggleFavorite","prev","Math","max","className","children","src","imageUrl","alt","title","fileName","_jsxFileName","lineNumber","columnNumber","author","description","onClick","disabled","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","_c","$RefreshReg$"],"sources":["/Users/leonardomota/Desktop/testeDeSoftware/library-system-react/src/components/BookCard.jsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport { useAuth } from \"../contexts/AuthContext\";\nimport { addToFavorites, removeFromFavorites } from \"../services/bookService\";\n\nexport default function BookCard({ book }) {\n  const { user } = useAuth();\n  const [isFavorite, setIsFavorite] = useState(false);\n  const [favoritesCount, setFavoritesCount] = useState(book.favoritesCount || 0);\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    if (user) {\n      // Verificar se o livro est치 nos favoritos do usu치rio\n      const checkFavorite = async () => {\n        try {\n          const userFavorites = await getUserFavorites(user.uid);\n          setIsFavorite(userFavorites.some(fav => fav.id === book.id));\n        } catch (error) {\n          console.error(\"Erro ao verificar favoritos:\", error);\n        }\n      };\n      checkFavorite();\n    }\n  }, [user, book.id]);\n\n  const handleToggleFavorite = async () => {\n    if (!user) return;\n    \n    setLoading(true);\n    try {\n      if (isFavorite) {\n        await removeFromFavorites(user.uid, book.id);\n        setFavoritesCount(prev => Math.max(0, prev - 1));\n      } else {\n        await addToFavorites(user.uid, book);\n        setFavoritesCount(prev => prev + 1);\n      }\n      setIsFavorite(!isFavorite);\n    } catch (error) {\n      console.error(\"Erro ao atualizar favoritos:\", error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-300\">\n      <div className=\"relative pb-[140%]\">\n        <img\n          src={book.imageUrl}\n          alt={book.title}\n          className=\"absolute top-0 left-0 w-full h-full object-cover\"\n        />\n      </div>\n      <div className=\"p-4\">\n        <h3 className=\"text-lg font-semibold text-gray-800 mb-2 line-clamp-2\">\n          {book.title}\n        </h3>\n        <p className=\"text-sm text-gray-600 mb-3\">\n          {book.author}\n        </p>\n        <p className=\"text-sm text-gray-500 mb-4 line-clamp-3\">\n          {book.description}\n        </p>\n        <div className=\"flex items-center justify-between\">\n          <span className=\"text-sm text-gray-500\">\n            {favoritesCount} {favoritesCount === 1 ? 'favorito' : 'favoritos'}\n          </span>\n          <button\n            onClick={handleToggleFavorite}\n            disabled={loading || !user}\n            className={`flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium transition-colors ${\n              isFavorite\n                ? \"bg-red-100 text-red-600 hover:bg-red-200\"\n                : \"bg-gray-100 text-gray-600 hover:bg-gray-200\"\n            } ${(!user || loading) && \"opacity-50 cursor-not-allowed\"}`}\n          >\n            {loading ? (\n              <div className=\"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin\" />\n            ) : (\n              <>\n                <svg\n                  className=\"w-4 h-4\"\n                  fill={isFavorite ? \"currentColor\" : \"none\"}\n                  stroke=\"currentColor\"\n                  viewBox=\"0 0 24 24\"\n                >\n                  <path\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                    strokeWidth={2}\n                    d=\"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z\"\n                  />\n                </svg>\n                {isFavorite ? \"Favoritado\" : \"Favoritar\"}\n              </>\n            )}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n  "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}