{"ast":null,"code":"var _jsxFileName = \"/Users/leonardomota/Desktop/testeDeSoftware/library-system-react/src/components/BookCard.jsx\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport { useAuth } from \"../contexts/AuthContext\";\nimport { addToFavorites, removeFromFavorites, isBookFavorited } from \"../services/bookService\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst BookCard = ({\n  book\n}) => {\n  _s();\n  const {\n    user\n  } = useAuth();\n  const [isFavorite, setIsFavorite] = useState(false);\n  const [loading, setLoading] = useState(false);\n  useEffect(() => {\n    const checkFavoriteStatus = async () => {\n      if (user) {\n        const favorited = await isBookFavorited(user.uid, book.id);\n        setIsFavorite(favorited);\n      }\n    };\n    checkFavoriteStatus();\n  }, [user, book.id]);\n  const handleToggleFavorite = async () => {\n    if (!user) {\n      alert(\"Por favor, faça login para favoritar livros.\");\n      return;\n    }\n    setLoading(true);\n    try {\n      if (isFavorite) {\n        await removeFromFavorites(user.uid, book.id);\n        setIsFavorite(false);\n      } else {\n        await addToFavorites(user.uid, book);\n        setIsFavorite(true);\n      }\n    } catch (error) {\n      console.error(\"Erro ao atualizar favoritos:\", error);\n      alert(\"Erro ao atualizar favoritos. Por favor, tente novamente.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-300\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"aspect-w-3 aspect-h-4 relative\",\n      children: book.imageUrl ? /*#__PURE__*/_jsxDEV(\"img\", {\n        src: book.imageUrl,\n        alt: book.title,\n        className: \"object-cover w-full h-full\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full h-full bg-gray-200 flex items-center justify-center\",\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-gray-400\",\n          children: \"Sem imagem\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"font-semibold text-lg mb-1 line-clamp-2\",\n        children: book.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-600 text-sm mb-2\",\n        children: book.author\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between mt-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleToggleFavorite,\n          disabled: loading,\n          className: `flex items-center gap-1 px-3 py-1 rounded-full text-sm ${isFavorite ? \"bg-red-100 text-red-600\" : \"bg-gray-100 text-gray-600 hover:bg-gray-200\"}`,\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: isFavorite ? \"Favoritado\" : \"Favoritar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 13\n          }, this), loading && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"animate-spin rounded-full h-4 w-4 border-b-2 border-current\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 11\n        }, this), book.previewLink && /*#__PURE__*/_jsxDEV(\"a\", {\n          href: book.previewLink,\n          target: \"_blank\",\n          rel: \"noopener noreferrer\",\n          className: \"text-blue-500 hover:text-blue-600 text-sm\",\n          children: \"Ver mais\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 5\n  }, this);\n};\n_s(BookCard, \"VOHPEKaf+Dx8Vhl8sxjfhOzjpNQ=\", false, function () {\n  return [useAuth];\n});\n_c = BookCard;\nexport default BookCard;\nvar _c;\n$RefreshReg$(_c, \"BookCard\");","map":{"version":3,"names":["useState","useEffect","useAuth","addToFavorites","removeFromFavorites","isBookFavorited","jsxDEV","_jsxDEV","BookCard","book","_s","user","isFavorite","setIsFavorite","loading","setLoading","checkFavoriteStatus","favorited","uid","id","handleToggleFavorite","alert","error","console","className","children","imageUrl","src","alt","title","fileName","_jsxFileName","lineNumber","columnNumber","author","onClick","disabled","previewLink","href","target","rel","_c","$RefreshReg$"],"sources":["/Users/leonardomota/Desktop/testeDeSoftware/library-system-react/src/components/BookCard.jsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport { useAuth } from \"../contexts/AuthContext\";\nimport { addToFavorites, removeFromFavorites, isBookFavorited } from \"../services/bookService\";\n\nconst BookCard = ({ book }) => {\n  const { user } = useAuth();\n  const [isFavorite, setIsFavorite] = useState(false);\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    const checkFavoriteStatus = async () => {\n      if (user) {\n        const favorited = await isBookFavorited(user.uid, book.id);\n        setIsFavorite(favorited);\n      }\n    };\n    checkFavoriteStatus();\n  }, [user, book.id]);\n\n  const handleToggleFavorite = async () => {\n    if (!user) {\n      alert(\"Por favor, faça login para favoritar livros.\");\n      return;\n    }\n\n    setLoading(true);\n    try {\n      if (isFavorite) {\n        await removeFromFavorites(user.uid, book.id);\n        setIsFavorite(false);\n      } else {\n        await addToFavorites(user.uid, book);\n        setIsFavorite(true);\n      }\n    } catch (error) {\n      console.error(\"Erro ao atualizar favoritos:\", error);\n      alert(\"Erro ao atualizar favoritos. Por favor, tente novamente.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-300\">\n      <div className=\"aspect-w-3 aspect-h-4 relative\">\n        {book.imageUrl ? (\n          <img\n            src={book.imageUrl}\n            alt={book.title}\n            className=\"object-cover w-full h-full\"\n          />\n        ) : (\n          <div className=\"w-full h-full bg-gray-200 flex items-center justify-center\">\n            <span className=\"text-gray-400\">Sem imagem</span>\n          </div>\n        )}\n      </div>\n      \n      <div className=\"p-4\">\n        <h3 className=\"font-semibold text-lg mb-1 line-clamp-2\">{book.title}</h3>\n        <p className=\"text-gray-600 text-sm mb-2\">{book.author}</p>\n        \n        <div className=\"flex items-center justify-between mt-4\">\n          <button\n            onClick={handleToggleFavorite}\n            disabled={loading}\n            className={`flex items-center gap-1 px-3 py-1 rounded-full text-sm ${\n              isFavorite\n                ? \"bg-red-100 text-red-600\"\n                : \"bg-gray-100 text-gray-600 hover:bg-gray-200\"\n            }`}\n          >\n            <span>{isFavorite ? \"Favoritado\" : \"Favoritar\"}</span>\n            {loading && (\n              <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-current\"></div>\n            )}\n          </button>\n          \n          {book.previewLink && (\n            <a\n              href={book.previewLink}\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              className=\"text-blue-500 hover:text-blue-600 text-sm\"\n            >\n              Ver mais\n            </a>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default BookCard;\n  "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}